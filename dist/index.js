import{deepmerge as p}from"deepmerge-ts";import f from"./lib/pipe-all.js";import a from"./options/index.js";import n from"./lib/forward-slash-it.js";import i from"./lib/get-config.js";const s=JSON.parse(i("rome.json"));var u=(r={})=>{for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&r[t]===!0&&(r[t]=a()[t]);const o=p(a(),r);return(typeof o.rome>"u"||o.rome===null)&&(o.rome=s),{name:"astro-rome",hooks:{"astro:config:done":async t=>{o.path=o.path?o.path:t.config.outDir},"astro:build:done":async()=>{let t=new Set;if(typeof o.path<"u")if(o.path instanceof Array||o.path instanceof Set)for(const e of o.path)t.add(n(e));else t.add(n(o.path));for(const e of t)await f(e,o,o.logger)}}}};export{u as default};
